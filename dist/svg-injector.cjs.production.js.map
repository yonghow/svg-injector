{"version":3,"file":"svg-injector.cjs.production.js","sources":["../src/clone-svg.ts","../src/is-local.ts","../src/svg-cache.ts","../src/request-queue.ts","../src/load-svg.ts","../src/unique-id.ts","../src/inject-element.ts","../src/types.ts","../src/svg-injector.ts"],"sourcesContent":["const cloneSvg = (sourceSvg: HTMLElement | SVGSVGElement) =>\n  sourceSvg.cloneNode(true) as Element\n\nexport default cloneSvg\n","const isLocal = () => window.location.protocol === 'file:'\n\nexport default isLocal\n","const svgCache = new Map<\n  string,\n  HTMLElement | SVGSVGElement | Error | undefined\n>()\n\nexport default svgCache\n","import cloneSvg from './clone-svg'\nimport svgCache from './svg-cache'\nimport { Errback } from './types'\n\nlet requestQueue: { [key: string]: Errback[] } = {}\n\nexport const clear = () => {\n  requestQueue = {}\n}\n\nexport const queueRequest = (url: string, callback: Errback) => {\n  requestQueue[url] = requestQueue[url] || []\n  requestQueue[url].push(callback)\n}\n\nexport const processRequestQueue = (url: string) => {\n  for (let i = 0, len = requestQueue[url].length; i < len; i++) {\n    // Make these calls async so we avoid blocking the page/renderer.\n    setTimeout(() => {\n      /* istanbul ignore else */\n      if (Array.isArray(requestQueue[url])) {\n        const cacheValue = svgCache.get(url)\n        const callback = requestQueue[url][i]\n\n        /* istanbul ignore else */\n        if (\n          cacheValue instanceof SVGSVGElement ||\n          cacheValue instanceof HTMLElement\n        ) {\n          callback(null, cloneSvg(cacheValue))\n        }\n\n        /* istanbul ignore else */\n        if (cacheValue instanceof Error) {\n          callback(cacheValue)\n        }\n\n        /* istanbul ignore else */\n        if (i === requestQueue[url].length - 1) {\n          delete requestQueue[url]\n        }\n      }\n    }, 0)\n  }\n}\n","import cloneSvg from './clone-svg'\nimport isLocal from './is-local'\nimport { processRequestQueue, queueRequest } from './request-queue'\nimport svgCache from './svg-cache'\nimport { Errback } from './types'\n\nconst loadSvg = (url: string, withCredentials: boolean, callback: Errback) => {\n  if (svgCache.has(url)) {\n    const cacheValue = svgCache.get(url)\n\n    if (\n      cacheValue instanceof SVGSVGElement ||\n      cacheValue instanceof HTMLElement\n    ) {\n      callback(null, cloneSvg(cacheValue))\n      return\n    }\n\n    if (cacheValue instanceof Error) {\n      callback(cacheValue)\n      return\n    }\n\n    queueRequest(url, callback)\n\n    return\n  }\n\n  // Seed the cache to indicate we are loading this URL.\n  svgCache.set(url, undefined)\n  queueRequest(url, callback)\n\n  const httpRequest = new XMLHttpRequest()\n\n  httpRequest.withCredentials = withCredentials\n\n  httpRequest.onreadystatechange = () => {\n    try {\n      if (httpRequest.readyState === 4) {\n        if (httpRequest.status === 404 || httpRequest.responseXML === null) {\n          throw new Error(\n            isLocal()\n              ? 'Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver.'\n              : 'Unable to load SVG file: ' + url\n          )\n        }\n\n        if (\n          httpRequest.status === 200 ||\n          (isLocal() && httpRequest.status === 0)\n        ) {\n          /* istanbul ignore else */\n          if (httpRequest.responseXML instanceof Document) {\n            /* istanbul ignore else */\n            if (httpRequest.responseXML.documentElement) {\n              svgCache.set(url, httpRequest.responseXML.documentElement)\n            }\n          }\n          processRequestQueue(url)\n        } else {\n          throw new Error(\n            'There was a problem injecting the SVG: ' +\n              httpRequest.status +\n              ' ' +\n              httpRequest.statusText\n          )\n        }\n      }\n    } catch (error) {\n      svgCache.set(url, error)\n      processRequestQueue(url)\n    }\n  }\n\n  httpRequest.open('GET', url)\n\n  // Treat and parse the response as XML, even if the server sends us a\n  // different mimetype.\n  /* istanbul ignore else */\n  if (httpRequest.overrideMimeType) {\n    httpRequest.overrideMimeType('text/xml')\n  }\n\n  httpRequest.send()\n}\n\nexport default loadSvg\n","let idCounter = 0\nconst uniqueId = () => ++idCounter\nexport default uniqueId\n","import loadSvg from './load-svg'\nimport { BeforeEach, Errback, EvalScripts } from './types'\nimport uniqueId from './unique-id'\n\ntype ElementType = Element | HTMLElement | null\n\nconst injectedElements: ElementType[] = []\nconst ranScripts: { [key: string]: boolean } = {}\nconst svgNamespace = 'http://www.w3.org/2000/svg'\nconst xlinkNamespace = 'http://www.w3.org/1999/xlink'\n\nconst injectElement = (\n  el: NonNullable<ElementType>,\n  evalScripts: EvalScripts,\n  renumerateIRIElements: boolean,\n  beforeEach: BeforeEach,\n  withCredentials: boolean,\n  callback: Errback\n) => {\n  const imgUrl = el.getAttribute('data-src') || el.getAttribute('src')\n\n  /* istanbul ignore else */\n  if (!imgUrl || !/\\.svg/i.test(imgUrl)) {\n    callback(\n      new Error(\n        'Attempted to inject a file with a non-svg extension: ' + imgUrl\n      )\n    )\n    return\n  }\n\n  // Make sure we aren't already in the process of injecting this element to\n  // avoid a race condition if multiple injections for the same element are run.\n  // :NOTE: Using indexOf() only _after_ we check for SVG support and bail, so\n  // no need for IE8 indexOf() polyfill.\n  /* istanbul ignore else */\n  if (injectedElements.indexOf(el) !== -1) {\n    // TODO: Extract.\n    injectedElements.splice(injectedElements.indexOf(el), 1)\n    ;(el as ElementType) = null\n    return\n  }\n\n  // Remember the request to inject this element, in case other injection calls\n  // are also trying to replace this element before we finish.\n  injectedElements.push(el)\n\n  // Try to avoid loading the orginal image src if possible.\n  el.setAttribute('src', '')\n\n  loadSvg(imgUrl, withCredentials, (error, svg) => {\n    /* istanbul ignore else */\n    if (!svg) {\n      // TODO: Extract.\n      injectedElements.splice(injectedElements.indexOf(el), 1)\n      ;(el as ElementType) = null\n      callback(error)\n      return\n    }\n\n    const imgId = el.getAttribute('id')\n    /* istanbul ignore else */\n    if (imgId) {\n      svg.setAttribute('id', imgId)\n    }\n\n    const imgTitle = el.getAttribute('title')\n    /* istanbul ignore else */\n    if (imgTitle) {\n      svg.setAttribute('title', imgTitle)\n    }\n\n    const imgWidth = el.getAttribute('width')\n    /* istanbul ignore else */\n    if (imgWidth) {\n      svg.setAttribute('width', imgWidth)\n    }\n\n    const imgHeight = el.getAttribute('height')\n    /* istanbul ignore else */\n    if (imgHeight) {\n      svg.setAttribute('height', imgHeight)\n    }\n\n    const mergedClasses = Array.from(\n      new Set([\n        ...(svg.getAttribute('class') || '').split(' '),\n        'injected-svg',\n        ...(el.getAttribute('class') || '').split(' ')\n      ])\n    )\n      .join(' ')\n      .trim()\n    svg.setAttribute('class', mergedClasses)\n\n    const imgStyle = el.getAttribute('style')\n    /* istanbul ignore else */\n    if (imgStyle) {\n      svg.setAttribute('style', imgStyle)\n    }\n\n    svg.setAttribute('data-src', imgUrl)\n\n    // Copy all the data elements to the svg.\n    const imgData = [].filter.call(el.attributes, (at: Attr) => {\n      return /^data-\\w[\\w-]*$/.test(at.name)\n    })\n\n    Array.prototype.forEach.call(imgData, (dataAttr: Attr) => {\n      /* istanbul ignore else */\n      if (dataAttr.name && dataAttr.value) {\n        svg.setAttribute(dataAttr.name, dataAttr.value)\n      }\n    })\n\n    /* istanbul ignore else */\n    if (renumerateIRIElements) {\n      // Make sure any internally referenced clipPath ids and their clip-path\n      // references are unique.\n      //\n      // This addresses the issue of having multiple instances of the same SVG\n      // on a page and only the first clipPath id is referenced.\n      //\n      // Browsers often shortcut the SVG Spec and don't use clipPaths contained\n      // in parent elements that are hidden, so if you hide the first SVG\n      // instance on the page, then all other instances lose their clipping.\n      // Reference: https://bugzilla.mozilla.org/show_bug.cgi?id=376027\n\n      // Handle all defs elements that have iri capable attributes as defined by\n      // w3c: http://www.w3.org/TR/SVG/linking.html#processingIRI. Mapping IRI\n      // addressable elements to the properties that can reference them.\n      const iriElementsAndProperties: { [key: string]: string[] } = {\n        clipPath: ['clip-path'],\n        'color-profile': ['color-profile'],\n        cursor: ['cursor'],\n        filter: ['filter'],\n        linearGradient: ['fill', 'stroke'],\n        marker: ['marker', 'marker-start', 'marker-mid', 'marker-end'],\n        mask: ['mask'],\n        path: [],\n        pattern: ['fill', 'stroke'],\n        radialGradient: ['fill', 'stroke']\n      }\n\n      let element\n      let elements\n      let properties\n      let currentId: string\n      let newId: string\n\n      Object.keys(iriElementsAndProperties).forEach(key => {\n        element = key\n        properties = iriElementsAndProperties[key]\n\n        elements = svg.querySelectorAll(element + '[id]')\n        for (let a = 0, elementsLen = elements.length; a < elementsLen; a++) {\n          currentId = elements[a].id\n          newId = currentId + '-' + uniqueId()\n\n          // All of the properties that can reference this element type.\n          let referencingElements\n          Array.prototype.forEach.call(properties, (property: string) => {\n            // :NOTE: using a substring match attr selector here to deal with IE\n            // \"adding extra quotes in url() attrs\".\n            referencingElements = svg.querySelectorAll(\n              '[' + property + '*=\"' + currentId + '\"]'\n            )\n            for (\n              let b = 0, referencingElementLen = referencingElements.length;\n              b < referencingElementLen;\n              b++\n            ) {\n              const attrValue: string | null = referencingElements[\n                b\n              ].getAttribute(property)\n              if (\n                attrValue &&\n                !attrValue.match(new RegExp('url\\\\(#' + currentId + '\\\\)'))\n              ) {\n                continue\n              }\n              referencingElements[b].setAttribute(\n                property,\n                'url(#' + newId + ')'\n              )\n            }\n          })\n\n          const allLinks = svg.querySelectorAll('[*|href]')\n          const links = []\n          for (let c = 0, allLinksLen = allLinks.length; c < allLinksLen; c++) {\n            const href = allLinks[c].getAttributeNS(xlinkNamespace, 'href')\n            /* istanbul ignore else */\n            if (href && href.toString() === '#' + elements[a].id) {\n              links.push(allLinks[c])\n            }\n          }\n          for (let d = 0, linksLen = links.length; d < linksLen; d++) {\n            links[d].setAttributeNS(xlinkNamespace, 'href', '#' + newId)\n          }\n\n          elements[a].id = newId\n        }\n      })\n    }\n\n    // Remove any unwanted/invalid namespaces that might have been added by SVG\n    // editing tools.\n    svg.removeAttribute('xmlns:a')\n\n    // Post page load injected SVGs don't automatically have their script\n    // elements run, so we'll need to make that happen, if requested.\n\n    // Find then prune the scripts.\n    const scripts = svg.querySelectorAll('script')\n    const scriptsToEval: string[] = []\n    let script\n    let scriptType\n\n    for (let i = 0, scriptsLen = scripts.length; i < scriptsLen; i++) {\n      scriptType = scripts[i].getAttribute('type')\n\n      // Only process javascript types. SVG defaults to 'application/ecmascript'\n      // for unset types.\n      /* istanbul ignore else */\n      if (\n        !scriptType ||\n        scriptType === 'application/ecmascript' ||\n        scriptType === 'application/javascript' ||\n        scriptType === 'text/javascript'\n      ) {\n        // innerText for IE, textContent for other browsers.\n        script = scripts[i].innerText || scripts[i].textContent\n\n        // Stash.\n        /* istanbul ignore else */\n        if (script) {\n          scriptsToEval.push(script)\n        }\n\n        // Tidy up and remove the script element since we don't need it anymore.\n        svg.removeChild(scripts[i])\n      }\n    }\n\n    // Run/Eval the scripts if needed.\n    /* istanbul ignore else */\n    if (\n      scriptsToEval.length > 0 &&\n      (evalScripts === 'always' ||\n        (evalScripts === 'once' && !ranScripts[imgUrl]))\n    ) {\n      for (\n        let l = 0, scriptsToEvalLen = scriptsToEval.length;\n        l < scriptsToEvalLen;\n        l++\n      ) {\n        // :NOTE: Yup, this is a form of eval, but it is being used to eval code\n        // the caller has explictely asked to be loaded, and the code is in a\n        // caller defined SVG file... not raw user input.\n        //\n        // Also, the code is evaluated in a closure and not in the global scope.\n        // If you need to put something in global scope, use 'window'.\n        new Function(scriptsToEval[l])(window)\n      }\n\n      // Remember we already ran scripts for this svg.\n      ranScripts[imgUrl] = true\n    }\n\n    // :WORKAROUND: IE doesn't evaluate <style> tags in SVGs that are\n    // dynamically added to the page. This trick will trigger IE to read and use\n    // any existing SVG <style> tags.\n    //\n    // Reference: https://github.com/iconic/SVGInjector/issues/23.\n    const styleTags = svg.querySelectorAll('style')\n    Array.prototype.forEach.call(styleTags, (styleTag: HTMLStyleElement) => {\n      styleTag.textContent += ''\n    })\n\n    svg.setAttribute('xmlns', svgNamespace)\n    svg.setAttribute('xmlns:xlink', xlinkNamespace)\n\n    beforeEach(svg)\n\n    // Replace the image with the svg.\n    /* istanbul ignore else */\n    if (el.parentNode) {\n      el.parentNode.replaceChild(svg, el)\n    }\n\n    // Now that we no longer need it, drop references to the original element so\n    // it can be GC'd.\n    // TODO: Extract\n    injectedElements.splice(injectedElements.indexOf(el), 1)\n    ;(el as ElementType) = null\n\n    callback(null, svg)\n  })\n}\n\nexport default injectElement\n","/* istanbul ignore file */\n\nexport type AfterAll = (elementsLoaded: number) => void\n\nexport type BeforeEach = (svg: Element) => void\n\nexport type Errback = (error: Error | null, svg?: Element) => void\n\nexport enum EvalScripts {\n  Always = 'always',\n  Once = 'once',\n  Never = 'never'\n}\n","import injectElement from './inject-element'\nimport { AfterAll, BeforeEach, Errback, EvalScripts } from './types'\n\ntype Elements = HTMLCollectionOf<Element> | NodeListOf<Element> | Element | null\n\ninterface OptionalArgs {\n  afterAll?: AfterAll\n  afterEach?: Errback\n  beforeEach?: BeforeEach\n  evalScripts?: EvalScripts\n  renumerateIRIElements?: boolean\n  withCredentials?: boolean\n}\n\nconst SVGInjector = (\n  elements: Elements,\n  {\n    afterAll = () => undefined,\n    afterEach = () => undefined,\n    beforeEach = () => undefined,\n    evalScripts = EvalScripts.Never,\n    renumerateIRIElements = true,\n    withCredentials = false,\n  }: OptionalArgs = {}\n) => {\n  if (elements && 'length' in elements) {\n    let elementsLoaded = 0\n    for (let i = 0, j = elements.length; i < j; i++) {\n      injectElement(\n        elements[i],\n        evalScripts,\n        renumerateIRIElements,\n        beforeEach,\n        withCredentials,\n        (error, svg) => {\n          afterEach(error, svg)\n          if (\n            elements &&\n            'length' in elements &&\n            elements.length === ++elementsLoaded\n          ) {\n            afterAll(elementsLoaded)\n          }\n        }\n      )\n    }\n  } else if (elements) {\n    injectElement(\n      elements,\n      evalScripts,\n      renumerateIRIElements,\n      beforeEach,\n      withCredentials,\n      (error, svg) => {\n        afterEach(error, svg)\n        afterAll(1)\n        elements = null\n      }\n    )\n  } else {\n    afterAll(0)\n  }\n}\n\nexport default SVGInjector\n"],"names":["cloneSvg","sourceSvg","cloneNode","isLocal","window","location","protocol","svgCache","Map","requestQueue","queueRequest","url","callback","push","processRequestQueue","i","len","setTimeout","Array","isArray","cacheValue","get","SVGSVGElement","HTMLElement","Error","length","loadSvg","withCredentials","has","set","undefined","httpRequest","XMLHttpRequest","onreadystatechange","readyState","status","responseXML","statusText","Document","documentElement","error","open","overrideMimeType","send","idCounter","uniqueId","injectedElements","ranScripts","svgNamespace","xlinkNamespace","injectElement","el","evalScripts","renumerateIRIElements","beforeEach","imgUrl","getAttribute","test","indexOf","splice","setAttribute","svg","imgId","imgTitle","imgWidth","imgHeight","mergedClasses","from","Set","split","join","trim","imgStyle","imgData","filter","call","attributes","at","name","prototype","forEach","dataAttr","value","elements_1","properties_1","currentId_1","newId_1","iriElementsAndProperties_1","clipPath","cursor","linearGradient","marker","mask","path","pattern","radialGradient","Object","keys","key","a","elementsLen","referencingElements","id","property","b","referencingElementLen","querySelectorAll","attrValue","match","RegExp","allLinks","links","c","allLinksLen","href","getAttributeNS","toString","d","linksLen","setAttributeNS","removeAttribute","script","scriptType","scripts","scriptsToEval","scriptsLen","innerText","textContent","removeChild","l","scriptsToEvalLen","Function","styleTags","styleTag","parentNode","replaceChild","EvalScripts","SVGInjector","elements","_a","_b","_c","afterAll","_d","afterEach","_e","_f","_g","_h","elementsLoaded_1","j"],"mappings":"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"}